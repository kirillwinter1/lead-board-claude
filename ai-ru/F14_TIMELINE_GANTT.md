# F14: Timeline/Gantt Visualization

## Обзор

Страница `/timeline` с Gantt-диаграммой для визуализации плана работ по эпикам.

## Функционал

### 1. Gantt-диаграмма

- **Горизонтальные бары** для каждой фазы эпика (SA, DEV, QA)
- **Цветовая кодировка:**
  - SA — синий (#0052cc)
  - DEV — зелёный (#36b37e)
  - QA — оранжевый (#ff991f)
- **Opacity** по уровню уверенности (HIGH=1.0, MEDIUM=0.7, LOW=0.4)

### 2. Индикаторы

- **Today** — синяя вертикальная линия с точкой
- **Due Date** — красная вертикальная линия с треугольником
- **No Resource** — красные полосатые бары с пульсацией (когда нет ресурсов для роли)

### 3. Zoom уровни

- **Day** — по дням
- **Week** — по неделям
- **Month** — по месяцам

### 4. Адаптивность

- Автоматическая подгонка под ширину экрана
- Проценты вместо фиксированных пикселей
- Без горизонтального скролла

## Конвейерная модель планирования (Pipeline)

### Проблема старой модели

Последовательная модель: SA весь эпик → DEV весь эпик → QA весь эпик

```
SA:  [=========]
DEV:            [==================]
QA:                                 [=========]
Итого: 12 дней
```

### Новая конвейерная модель

Работа по сторям параллельно: DEV начинает после первой стори SA, QA после первой стори DEV.

```
SA:  [===]
DEV:   [==================]
QA:       [=========]
Итого: 8 дней
```

### Настройка StoryDuration

В конфиге команды (`/teams/{id}` → Настройки планирования):

| Параметр | Описание | Default |
|----------|----------|---------|
| SA (дней) | Время на одну сторю для SA | 2 |
| DEV (дней) | Время на одну сторю для DEV | 2 |
| QA (дней) | Время на одну сторю для QA | 2 |

**Влияние:** Меньше значение → больше параллелизм фаз.

## API

### GET /api/planning/forecast

Response включает `phaseSchedule` для каждого эпика:

```json
{
  "phaseSchedule": {
    "sa": {
      "startDate": "2026-01-26",
      "endDate": "2026-01-27",
      "workDays": 1.8,
      "noCapacity": false
    },
    "dev": {
      "startDate": "2026-01-29",
      "endDate": "2026-02-20",
      "workDays": 12.4,
      "noCapacity": false
    },
    "qa": {
      "startDate": "2026-02-04",
      "endDate": "2026-02-13",
      "workDays": 3.5,
      "noCapacity": false
    }
  }
}
```

**noCapacity** — `true` если нет ресурсов для роли (бар показывается с предупреждением).

## Файлы

### Backend
- `ForecastService.java` — конвейерная логика расчёта фаз
- `PlanningConfigDto.java` — добавлен `StoryDuration`
- `EpicForecast.java` — добавлен `noCapacity` в `PhaseInfo`

### Frontend
- `TimelinePage.tsx` — новая страница Gantt
- `App.tsx` — роут `/timeline`
- `Layout.tsx` — таб "Timeline"
- `App.css` — стили Gantt
- `teams.ts` — тип `StoryDuration`
- `forecast.ts` — `noCapacity` в `PhaseInfo`
- `TeamMembersPage.tsx` — UI настройки StoryDuration

## UI

```
┌─────────────────────────────────────────────────────────────┐
│  [Team: ▼]  [Zoom: ▼]   SA  DEV  QA  No Resource  Today Due │
├─────────────────────────────────────────────────────────────┤
│ Epic         │ Jan 26 │ Feb 2  │ Feb 9  │ Feb 16 │ ...     │
├──────────────┼────────┴────────┴────────┴────────┴─────────┤
│ LB-95 Title  │ [SA]  [======DEV======]  [==QA==]           │
│ LB-96 Title  │      [SA]  [====DEV====]  [=QA=]            │
└─────────────────────────────────────────────────────────────┘
```
