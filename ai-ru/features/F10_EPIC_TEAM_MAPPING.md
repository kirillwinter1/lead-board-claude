# F10. Epic-Team Mapping

## Обзор

Привязка эпиков к командам через кастомное поле Team в Jira. Позволяет фильтровать доску и планирование по командам.

## Механизм

### Синхронизация
1. При Jira sync извлекается значение кастомного поля (`JIRA_TEAM_FIELD_ID`)
2. Значение сохраняется в `team_field_value` (сырое)
3. Маппинг на локальную команду по совпадению с `teams.jira_team_value`
4. Результат записывается в `team_id` (FK на teams)

### Маппинг с кириллицей
- Case-insensitive сравнение
- Fallback через `String.contains()` для частичного совпадения
- Поддержка разных форматов поля: строка, объект с полями value/name/displayName

## Поля в JiraIssueEntity

| Поле | Тип | Описание |
|------|-----|----------|
| `team_field_value` | VARCHAR | Сырое значение из Jira |
| `team_id` | BIGINT FK | Ссылка на локальную команду |

## Использование

- **Board:** фильтрация эпиков по `team_id`
- **Forecast:** планирование в рамках команды и её capacity
- **Metrics:** метрики рассчитываются по командам
- **Timeline:** отображение эпиков команды

## Миграция

`V4__add_team_field_to_jira_issues.sql` — добавление полей team_field_value и team_id.

## Конфигурация

`JIRA_TEAM_FIELD_ID` — ID кастомного поля в Jira (например, `customfield_12345`). Если не задано — маппинг не выполняется.
