# Roadmap V2 — Production Ready

## F24. Team Metrics v2 (DSR, Burndown, Forecast Integration)

**Приоритет:** ВЫСОКИЙ — развитие главной фичи (Forecast)

### Метрика DSR (Delivery Speed Ratio)
- **DSR Actual** = фактическое время в статусе Developing (рабочие дни, без выходных/праздников) / original estimate (часы → дни)
- Пример: эпик сделали за 15 рабочих дней при оценке 10 дней → DSR = 1.5
- Чем меньше DSR — тем эффективнее команда
- Учитывать производственный календарь РФ (уже есть)

### Метрика DSR Forecast
- DSR Forecast = фактическое время в Developing / предрасчитанная длительность по Forecast
- Показывает насколько точно Forecast предсказывает сроки

### Burndown по эпику
- Линия 1: фактическое списание времени (worklog) по эпику нарастающим итогом
- Линия 2: идеальное списание по Forecast (равномерное от начала до конца)
- Ось X — время, ось Y — часы
- Визуальное расхождение = проблема

### Использование Forecast
- Forecast — главная фича и конкурентное преимущество
- Все метрики должны сравниваться с Forecast: план vs факт
- Dashboard: отклонение от прогноза по каждому эпику

---

## F25. Recommendation System

**Приоритет:** ВЫСОКИЙ — уникальная ценность продукта

### Концепция
Доска знает оптимальный порядок работы (на основе данных), но не знает контекста. При ручных изменениях — подсказывает пользователю.

### Примеры рекомендаций (для проработки)
1. **Приоритет почти готового над начатым**: пользователь поднимает приоритет нового эпика выше почти завершённого → "Эпик X завершён на 80%, рекомендуется дозакрыть его раньше"
2. **Перегрузка роли**: назначено больше работы чем capacity → "SA перегружен на 30%, сроки по эпикам Y и Z сдвинутся"
3. **Простой ресурсов**: есть свободный capacity у роли, но нет задач → "У QA команды свободно 40ч, можно начать тестирование эпика Z"
4. **Нарушение конвейера**: QA-задача начата раньше DEV → предупреждение
5. **Блокировка**: ручное перемещение создаёт блокировку других задач
6. **Оценка vs факт**: время расходуется быстрее оценки → "При текущем темпе эпик X выйдет за оценку на 20%"
7. **WIP превышен**: количество эпиков в работе превышает лимит
8. **Due date под угрозой**: изменение приоритета сдвигает forecast за due date

### Архитектура
- Backend: `RecommendationService` — анализирует действия и генерирует рекомендации
- Backend: `RecommendationRule` — интерфейс для правил, добавляемых одно за другим
- Frontend: всплывающие подсказки при действиях пользователя + панель рекомендаций

---

## F26. Employee Performance Dashboard

**Приоритет:** СРЕДНИЙ

### Метрики сотрудника
1. **Throughput** — количество закрытых задач за период
2. **Velocity** — залогированные часы vs configured hours per day
3. **Accuracy** — фактическое время vs оценка (original estimate)
4. **DSR персональный** — приведённый lead time по задачам сотрудника
5. **Forecast Adherence** — справляется ли с предсказанным объёмом
6. **Logging Discipline** — логирует больше/меньше чем в конфигурации (hoursPerDay)
7. **Burndown персональный** — список задач + прогресс по времени

### Источники данных
- `jira_issues` — задачи и worklogs
- `team_members` — configured hoursPerDay, role, grade
- Forecast — предсказанный объём работы

### Визуализация
- Карточка сотрудника с ключевыми метриками
- Тренды за период (неделя/месяц/квартал)
- Сравнение с командой (без рейтинга — только контекст)
- Burndown график задач

---

## F27. RBAC (Role-Based Access Control)

**Приоритет:** ВЫСОКИЙ — обязателен для production

### Роли
- **Admin** — полный доступ, управление конфигурацией
- **Team Lead** — управление командой, просмотр всех метрик команды
- **Team Member** — просмотр доски, timeline, своих метрик
- **Viewer** (PM/Product) — только чтение, метрики, timeline

### Разграничение доступа
| Функция | Admin | Team Lead | Member | Viewer |
|---------|-------|-----------|--------|--------|
| Управление командами | ✅ | ✅ (своя) | ❌ | ❌ |
| Изменение приоритетов | ✅ | ✅ | ❌ | ❌ |
| Просмотр метрик команды | ✅ | ✅ | ✅ | ✅ |
| Просмотр метрик сотрудника | ✅ | ✅ (своя команда) | ✅ (свои) | ❌ |
| Planning Poker | ✅ | ✅ | ✅ | ❌ |
| Настройки | ✅ | ❌ | ❌ | ❌ |

### Реализация
- Интеграция с OAuth (уже есть)
- Middleware/Filter для проверки прав
- Frontend: скрытие UI-элементов по роли

---

## F28. RICE Scoring & AutoScore Integration

**Приоритет:** СРЕДНИЙ

### RICE
- **R**each — сколько пользователей затрагивает
- **I**mpact — степень влияния (Massive=3, High=2, Medium=1, Low=0.5, Minimal=0.25)
- **C**onfidence — уверенность в оценке (100%/80%/50%)
- **E**ffort — трудозатраты (person-months или story points)
- **RICE Score** = (Reach × Impact × Confidence) / Effort

### Интеграция
- Эпик в статусе Requirements **обязан** быть оценён по RICE
- Если RICE не заполнен и эпик продвигается дальше → alert (Data Quality)
- RICE Score учитывается в AutoScore как дополнительный фактор
- Можно ввести RICE по отдельным полям или как итоговое число

### UI
- Форма ввода RICE на карточке эпика
- Визуализация RICE в таблице (сортировка по score)

---

## F29. Project-Level Management (идея)

**Приоритет:** НИЗКИЙ — на рассмотрении

### Концепция
Проект = новый тип задачи в Jira, объединяющий несколько эпиков разных команд.

### Возможности
- Аккумуляция данных по эпикам нескольких команд
- Единый таймлайн проекта с разбивкой по командам
- Подсветка рисков: изменение сроков по эпику одной команды влияет на проект
- Cross-team dependencies
- Метрики на уровне проекта
- Целевая аудитория: PM и продакт-менеджеры

### Зависимости
- F27 (RBAC) — роль Viewer для PM/Product
- F24 (Metrics v2) — метрики для аккумуляции
- Jira: тип задачи "Project" с привязкой к эпикам

---

## Рекомендованный порядок реализации

1. **F24** — Team Metrics v2 (усиление главной фичи Forecast)
2. **F25** — Recommendation System (уникальная ценность)
3. **F27** — RBAC (production requirement)
4. **F28** — RICE Scoring
5. **F26** — Employee Performance
6. **F29** — Project-Level (если подтвердится потребность)
